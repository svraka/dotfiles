#!/usr/bin/bash
#
# https://gist.github.com/buruzaemon/5351379
#

#CYGWIN=server
#CYGSERVER=/usr/sbin/cygserver
PGDATA=/e/pgdata/
PGCTL=pg_ctl
PGLOG=/c/Users/SvrakaA/tmp/postgresql.log

usage() {
    echo "USAGE: pg (start|stop|restart|reload|status)"
    echo
}

start() {
    echo "starting postgresql..."
    $PGCTL start -D $PGDATA -l $PGLOG
    echo
}

stop() {
    echo "stopping postgresql..."
    $PGCTL stop -D $PGDATA -m smart
    echo
}

restart() {
    echo "restarting postgresql..."
    $PGCTL restart -D $PGDATA -m smart
    echo
}

reload() {
    echo "reloading postgresql..."
    $PGCTL reload -D $PGDATA
    echo
}


status() {
    $PGCTL status -D $PGDATA
}

if [ -n "$1" ]
then
    case $1 in
    start)
        start
        exit 0
        ;;
    stop)
        stop
        exit 0
        ;;
    restart)
        restart
        exit 0
        ;;
    reload)
        reload
        exit 0
        ;;
    status)
        status
        exit 0
        ;;
    *)
        usage
        exit 1
        ;;
    esac
else
    usage
    exit 1
fi
