#!/usr/bin/env bash
#
# Unzip compressed file into current directory.  Doesn't keep original
# timestamps

TYPE=${1##*.}
FILENAME=${1%.*}
FILENAME=${FILENAME##*/}

case "$TYPE" in
	"gz" )
		COMMAND=gzip
		;;
	"bz2" )
		COMMAND=bzip2
		;;
	"xz" )
		COMMAND=xz
		;;
	* )
		echo "Unknown compression format" >&2
		exit 1
		;;
esac

if [[ -e $FILENAME ]]; then
	echo "$COMMAND: $FILENAME exists; do you wish to overwrite?"
	select yn in "Yes" "No"; do
	    case $yn in
	        Yes ) "$COMMAND" -dkc "$1" > "$FILENAME"; break;;
	        No ) exit;;
	    esac
	done
fi
